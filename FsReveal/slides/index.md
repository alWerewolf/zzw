- title : Хакатон
- description : Introduction to React Native with F#
- author : Беляков Алексей, Подрезов Александр, Чудаков Тимофей
- theme : night
- transition : default

***

<br/>
<br/>

## Blockchain для передачи файлов
<br/>
<br/>
Команда DM
<br/>
НОЯБРЬ 2018

***

## Первичная регистрация участников.

<br/>

---

*   Генерация приватного и публичного ключей участника
*   Регистрация публичных ключей участников

---

|idx|data|hash|
|:--:|:--:|:--:|
|0|genesis|hash(data)|
|1|alice@some.net + public key|hash(idx0 + data)|    
|2|bob@some.net + public key|hash(idx1 + data)|    

***

## Регистрация объектов интеллектуальной собственности.

---

* Вычисление Merkle Root файла с определенной функцией валидации (FV)
* Генерация приватного и публичного ключей для файла
* Шифрование файла публичным ключом
* Регистрация файла

|idx|data|hash|
|:--:|:--:|:--:|    
|3|Владелец + Описание + Merkle Root файла + FV|hash(idx2 + data)| 

*** 

## Механизм взаимодействия между участниками сети.

---

* Заинтересованный участник, регистрирует свое желание в получении файла

|idx|data|hash|
|:--:|:--:|:--:|    
|4|Заявка на получение FV|hash(idx3 + data)|

--- 

* Владелец создает приватный и публичный сессионные ключи
* Владелец шифрует приватный ключ файла своим публичным сессионным ключом
* Вычисляет Merkle Root шифрованного приватного ключа файла
* Регистрирует

|idx|data|hash|
|:--:|:--:|:--:|    
|5|Merkle Root шифрованного приватного ключа файла|hash(idx4 + data)|

---

* Получатель создает приватный и публичный сессионные ключи
* Вносит депозит за файл

|idx|data|hash|
|:--:|:--:|:--:|    
|6|Публичный сессионный ключ получателя + депозит|hash(idx5 + data)|

---

* Владелец вносит гарантийные обязательства

|idx|data|hash|
|:--:|:--:|:--:|    
|7|Гарантийные обязательства|hash(idx6 + data)|
<br/>

* Ожидает фиксации обязательств

---

* Владелец через IFPS (или другую транспортную файловую систему) передайт шифрованный файл получателю

---

* Получатель уведовляет о получении всех данны и запрашивает приватный ключ файла
* Владелец шифрует приватный сессионный ключ файла публичным сессионным ключом получателя
* Регистрирует

|idx|data|hash|
|:--:|:--:|:--:|
|8|Уведомление о получении + запрос приватного ключа файла|hash(idx7 + data)|    
|9|Шифрованный приватный ключ файла + шифрованный приватный сессионный ключ|hash(idx8 + data)|

***

## Механизм разрешения конфликтных ситуаций

---

* Получатель проверяет Merkle Root шифрованного ключа файла
* Получатель проверяет расшифрованный файл

---

#### Проверка вернула отрицательный результат

---

* Получатель заявляет о том, что проверка вернула отрицательный результат
* Получатель регистрирует свой приватный сессионный ключ, ошибочный блок, Merkle Root
* Производится проверка
* Если ошибка подтверждается, то получателю перечисляется депозит и гарантийные обязательства

|idx|data|hash|
|:--:|:--:|:--:|
|9|Приватный сессионный ключ, ошибочный блок, Merkle Root|hash(idx8 + data)|
|10|Депозит и гарантийные обязательства получателю|hash(idx9 + data)|    

---

#### Проверка вернула положительный результат

---

* Владелец получает депозит и гарантийные обязательства

|idx|data|hash|
|:--:|:--:|:--:|
|9|Депозит и гарантийные обязательства владельцу|hash(idx8 + data)|    

***

### Спасибо за внимание!

---

##Справочная информация

* https://www.ibm.com/blogs/blockchain/2018/05/securing-your-cross-domain-file-transfers-with-blockchain/
* https://blog.disciplina.io/posts/disciplina-trustless-data-trade-protocol
